---
configuration: blueprints.yaml
---

import os
import tempfile
import shutil
import tarfile
import urllib
import urlparse
import contextlib

from os.path import expanduser

from cloudify_rest_client import bytes_stream_utils
from cloudify_rest_client.responses import ListResponse


{{#> model model=model _=_ }}
    {{#*inline model-overrides}}
        This is model overrides
    {{/inline}}
{{/model}}




class {{client.name}}(object):

    def __init__(self, api):
        self.api = api

{{#each client.functions}}

    def {{this.name}}(self, {{#each this.args}}{{this.name}}{{#unless @last}}, {{/unless}}{{/each}}):
        """
        {{#if this.doc.description}}
        {{{this.doc.description}}}

        {{/if ~}}

        {{#each this.args}}
        :param {{this.name}} {{{this.doc.description}}}
        {{/each}}

        {{#keepindentation}}
        {{#if this.doc.comment}}
        {{{this.doc.comment}}}
        {{/if}}
        {{/keepindentation }}
        """

        {{#if this.endpoint}}
        response = self.api.{{this.endpoint.method}}('{{this.endpoint.url}}'.format({{{formatargs this.args}}}))
        {{/if}}

        {{#func '["list"]' this.name this}}
        return ListResponse([{{../model.name}}(item) for item in response['items']], response['metadata'])
        {{else}}
            {{#if this.endpoint }}
        return {{../model.name}}(response)
            {{else}}
        pass
            {{/if}}
        {{/func}}


{{/each}}

